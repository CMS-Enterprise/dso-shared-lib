kind: Pod
metadata:
  name: tf-build
spec:
  serviceAccountName: jenkins-role
  restartPolicy: Never
  containers:
    - name: tfenv
      image: artifactory.cloud.cms.gov/docker/alpine:3.19.1
      imagePullPolicy: Always
      command:
      - cat
      tty: true
      volumeMounts:
      - mountPath: "/home/jenkins/agent"
        name: "workspace-volume"
        readOnly: false
      workingDir: "/home/jenkins/agent"
    - name: sonarqube
      image: artifactory.cloud.cms.gov/docker/sonarsource/sonar-scanner-cli:5.0.1
      imagePullPolicy: Always
      command:
      - cat
      tty: true
      volumeMounts:
      - mountPath: "/home/jenkins/agent"
        name: "workspace-volume"
        readOnly: false
      workingDir: "/home/jenkins/agent"
    - name: kaniko
      image: artifactory.cloud.cms.gov/docker/kaniko/executor:debug-1.20.1
      workingDir: "/home/jenkins/agent"
      imagePullPolicy: Always
      command:
      - /busybox/cat
      tty: true
      volumeMounts:
      - mountPath: "/home/jenkins/agent"
        name: "workspace-volume"
        readOnly: false
    - name: aws
      image: artifactory.cloud.cms.gov/docker/amazon/aws-cli:2.15.19
      workingDir: "/home/jenkins/agent"
      imagePullPolicy: Always
      tty: true
      volumeMounts:
      - mountPath: "/home/jenkins/agent"
        name: "workspace-volume"
        readOnly: false
  imagePullSecrets:
  - name: jfrog-secret
